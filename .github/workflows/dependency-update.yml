name: Dependency Updates

on:
  schedule:
    # Executar toda segunda-feira s 9h
    - cron: '0 9 * * 1'
  workflow_dispatch: # Permitir execu莽茫o manual

jobs:
  check-dependencies:
    name: Verificar Depend锚ncias
    runs-on: ubuntu-latest
    
    steps:
    - name:  Checkout c贸digo
      uses: actions/checkout@v4

    - name:  Setup Flutter
      uses: subosito/flutter-action@v2
      with:
        flutter-version: '3.24.5'
        channel: 'stable'

    - name:  Verificar depend锚ncias desatualizadas
      run: |
        flutter pub get
        flutter pub outdated --json > outdated.json || true

    - name:  Gerar relat贸rio
      run: |
        echo "##  Relat贸rio de Depend锚ncias" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        flutter pub outdated >> $GITHUB_STEP_SUMMARY || true

    - name:  Upload relat贸rio
      uses: actions/upload-artifact@v6
      with:
        name: dependency-report
        path: outdated.json
      continue-on-error: true
